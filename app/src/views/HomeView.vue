<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import { inject } from 'vue';

import { IndiDashboard } from 'vue-indi';

/*--------------------------------------------------------------------------------------------------------------------*/

import useConfigStore from '../stores/config';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const mqtt = inject('mqtt');

/*--------------------------------------------------------------------------------------------------------------------*/

const configStore = useConfigStore();

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const connect = () => {

    mqtt.update(
        configStore.globals.mqttURL,
        configStore.globals.mqttUsername,
        configStore.globals.mqttPassword
    );
};

/*--------------------------------------------------------------------------------------------------------------------*/

const disconnect = () => {

    mqtt.update('', '', '');
};

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <div class="h-100 w-100 p-3">

        <indi-dashboard @connect="connect" @disconnect="disconnect" />

    </div>

</template>
