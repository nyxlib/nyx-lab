// noinspection JSUnresolvedReference

/*--------------------------------------------------------------------------------------------------------------------*/

import { inject } from 'vue';

import { defineStore } from 'pinia';

/*--------------------------------------------------------------------------------------------------------------------*/
/* STORE                                                                                                              */
/*--------------------------------------------------------------------------------------------------------------------*/

const useConfigStore = defineStore('config', {
    state: () => {
        return {
            globals: {
                mqttURL: 'ws://localhost:8080/ws/',
                mqttUsername: '',
                mqttPassword: '',
                /**/
                nodeRedURL: '',
            },
        };
    },
    actions: {
        /*------------------------------------------------------------------------------------------------------------*/

        setup()
        {
            /*--------------------------------------------------------------------------------------------------------*/

            this.mqtt = inject('mqtt');

            /*--------------------------------------------------------------------------------------------------------*/
        },

        /*------------------------------------------------------------------------------------------------------------*/
        /* CONFIG                                                                                                     */
        /*------------------------------------------------------------------------------------------------------------*/

        configGet()
        {
            /*--------------------------------------------------------------------------------------------------------*/

            this.mqtt.update(
                this.globals.mqttURL,
                this.globals.mqttUsername,
                this.globals.mqttPassword
            );

            /*--------------------------------------------------------------------------------------------------------*/
        },

        /*------------------------------------------------------------------------------------------------------------*/
    },
});

/*--------------------------------------------------------------------------------------------------------------------*/

export default useConfigStore;

/*--------------------------------------------------------------------------------------------------------------------*/
