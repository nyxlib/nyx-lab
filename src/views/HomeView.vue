<!--suppress HtmlUnknownTag, JSUnresolvedReference -->
<script setup>
/*--------------------------------------------------------------------------------------------------------------------*/

import {inject} from 'vue';

/*--------------------------------------------------------------------------------------------------------------------*/

import useConfigStore from '../stores/config';

/*--------------------------------------------------------------------------------------------------------------------*/
/* VARIABLES                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const mqtt = inject('mqtt');
const nss = inject('nss');

/*--------------------------------------------------------------------------------------------------------------------*/

const configStore = useConfigStore();

/*--------------------------------------------------------------------------------------------------------------------*/
/* FUNCTIONS                                                                                                          */
/*--------------------------------------------------------------------------------------------------------------------*/

const connect = () => {

    mqtt.update(
        configStore.globals.mqttURL,
        configStore.globals.mqttUsername,
        configStore.globals.mqttPassword
    );

    nss.update(
        configStore.globals.nssURL,
        configStore.globals.nssUsername,
        configStore.globals.nssPassword
    );
};

/*--------------------------------------------------------------------------------------------------------------------*/

const disconnect = () => {

    mqtt.update('', '', '');

    nss.update('', '', '');
};

/*--------------------------------------------------------------------------------------------------------------------*/
</script>

<template>

    <!-- *********************************************************************************************************** -->

    <div class="overflow-y-auto h-100 w-100 p-3">

        <nyx-dashboard @connect="connect" @disconnect="disconnect" />

    </div>

    <!-- *********************************************************************************************************** -->

</template>
